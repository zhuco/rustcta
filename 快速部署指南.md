# 🚀 RustCTA 快速部署指南

## 📋 部署方案总览

| 方案 | 难度 | 速度 | 稳定性 | 推荐度 | 适用场景 |
|------|------|------|--------|--------|----------|
| **GitHub Actions自动化** | ⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | 🌟🌟🌟🌟🌟 | 生产环境 |
| WSL2本地编译 | ⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | 🌟🌟🌟🌟 | 开发测试 |
| Docker交叉编译 | ⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ | 🌟🌟🌟 | 特殊需求 |
| 服务器直接编译 | ⭐⭐ | ⭐⭐ | ⭐⭐⭐⭐ | 🌟🌟🌟 | 简单部署 |

## 🎯 推荐方案：GitHub Actions自动化

### 🌟 优势
- ✅ **零配置**: 无需本地编译环境
- ✅ **全自动**: 推送代码即自动构建
- ✅ **多平台**: 同时构建Linux/Windows/ARM版本
- ✅ **高可靠**: GitHub云端构建，稳定可靠
- ✅ **版本管理**: 自动创建Release版本
- ✅ **一键部署**: 下载即用，包含部署脚本

### 🚀 快速开始

#### 1. 设置GitHub仓库
```bash
# 运行GitHub设置脚本
双击运行: setup-github.bat

# 或手动操作:
# 1. 在GitHub创建新仓库 (公开)
# 2. 运行以下命令:
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/YOUR_USERNAME/rustcta.git
git push -u origin main
```

#### 2. 等待自动构建
- 📊 查看构建状态: `https://github.com/YOUR_USERNAME/rustcta/actions`
- ⏱️ 构建时间: 约5-10分钟
- 📦 构建产物: 自动上传到Artifacts

#### 3. 创建Release版本
```bash
# 创建版本标签触发自动发布
git tag v1.0.0
git push origin v1.0.0
```

#### 4. 下载并部署
```bash
# 下载最新版本
wget https://github.com/YOUR_USERNAME/rustcta/releases/latest/download/rustcta-linux-x86_64.tar.gz

# 解压并部署
tar -xzf rustcta-linux-x86_64.tar.gz
cd rustcta-linux-x86_64
./deploy.sh

# 配置API密钥
nano ~/rustcta/config/api.yml

# 启动程序
cd ~/rustcta && ./rustcta
```

## 🔧 备选方案

### 方案1: WSL2本地编译
```bash
# 适用于Windows开发者
双击运行: wsl-deploy.bat
```

### 方案2: 简化编译
```bash
# 多选项编译脚本
双击运行: simple-build.bat
```

### 方案3: Docker编译
```bash
# Docker交叉编译
双击运行: docker-build.bat
```

## ⚙️ 配置说明

### API配置
```yaml
# config/api.yml
binance:
  api_key: "your_api_key"
  secret_key: "your_secret_key"
  testnet: true  # 建议先用测试网
```

### 策略配置
```yaml
# config/strategy.yml
symbol: "BTCUSDT"
order_value: 16
leverage: 15
grid_count: 10
price_range: 0.02
```

## 🎮 运行命令

### 基本运行
```bash
# 前台运行
./rustcta

# 后台运行
nohup ./rustcta > log/app.log 2>&1 &
```

### 监控命令
```bash
# 查看日志
tail -f log/app.log

# 查看进程
ps aux | grep rustcta

# 停止程序
pkill rustcta
```

## 🛡️ 安全检查清单

### 部署前检查
- [ ] API密钥已正确配置
- [ ] 使用测试网进行初始测试
- [ ] 设置合理的交易参数
- [ ] 配置止损止盈
- [ ] 检查网络连接稳定性

### 运行中监控
- [ ] 定期查看交易日志
- [ ] 监控账户余额变化
- [ ] 检查程序运行状态
- [ ] 关注市场异常波动
- [ ] 备份重要配置文件

## 🔄 更新部署

### 自动更新 (推荐)
```bash
# 1. 推送新代码到GitHub
git add .
git commit -m "Update: 新功能描述"
git push

# 2. 创建新版本
git tag v1.1.0
git push origin v1.1.0

# 3. 等待自动构建
# 4. 下载新版本部署
```

### 手动更新
```bash
# 停止旧版本
pkill rustcta

# 备份配置
cp ~/rustcta/config/* /tmp/

# 下载新版本
wget https://github.com/YOUR_USERNAME/rustcta/releases/latest/download/rustcta-linux-x86_64.tar.gz
tar -xzf rustcta-linux-x86_64.tar.gz
cd rustcta-linux-x86_64

# 恢复配置
cp /tmp/api.yml config/
cp /tmp/strategy.yml config/

# 重新部署
./deploy.sh

# 启动新版本
cd ~/rustcta && nohup ./rustcta > log/app.log 2>&1 &
```

## 🆘 故障排除

### 常见问题

#### 1. 编译失败
```bash
# 检查Rust版本
rustc --version

# 更新Rust
rustup update

# 清理缓存
cargo clean
```

#### 2. API连接失败
```bash
# 检查网络连接
ping api.binance.com

# 检查API密钥
# 确保API密钥有效且权限正确

# 检查配置文件
cat config/api.yml
```

#### 3. 程序崩溃
```bash
# 查看错误日志
tail -n 100 log/app.log

# 检查系统资源
free -h
df -h
```

#### 4. GitHub Actions失败
- 检查代码语法错误
- 查看Actions日志
- 确认依赖项正确
- 检查网络连接

### 获取帮助
- 📖 查看详细文档: `README.md`
- 🐛 报告问题: GitHub Issues
- 💬 讨论交流: GitHub Discussions
- 📧 邮件支持: your-email@example.com

## 📈 性能优化建议

### 系统配置
```bash
# 增加文件描述符限制
echo "* soft nofile 65536" >> /etc/security/limits.conf
echo "* hard nofile 65536" >> /etc/security/limits.conf

# 优化网络参数
echo "net.core.rmem_max = 16777216" >> /etc/sysctl.conf
echo "net.core.wmem_max = 16777216" >> /etc/sysctl.conf
sysctl -p
```

### 程序配置
```yaml
# config/strategy.yml
# 根据服务器性能调整参数
max_concurrent_requests: 10  # 并发请求数
request_interval: 100        # 请求间隔(ms)
```

## 🎯 最佳实践

1. **渐进式部署**
   - 先测试网 → 小额实盘 → 正式运行

2. **风险控制**
   - 设置止损止盈
   - 限制最大持仓
   - 分散投资组合

3. **监控告警**
   - 设置日志监控
   - 配置异常告警
   - 定期检查状态

4. **备份恢复**
   - 定期备份配置
   - 保存交易记录
   - 准备应急方案

---

**🎉 恭喜！你已经掌握了RustCTA的完整部署流程！**

选择最适合你的部署方案，开始你的量化交易之旅吧！ 🚀